{"version":3,"names":[],"mappings":"","sources":["page/list.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\r\n  class list extends parent {\r\n    constructor() {\r\n      super()\r\n      this.state = {\r\n        data: [],\r\n        $list: $('#js-list'),\r\n        $arrowTop: $('#js-scroll-top'),\r\n      };\r\n      this.init()\r\n    }\r\n\r\n    init() {\r\n      this.load()\r\n    }\r\n\r\n    load() {\r\n      this.fetchData().then(res => {\r\n        this.state.data = res\r\n        this.render(res)\r\n\r\n        this.ready()\r\n      })\r\n    }\r\n    ready() {\r\n      this.state.$list.on('tap', (e) => {\r\n        const parent = $(e.target).parents('.list-itemWrap')[0]\r\n        const detail = $(parent).data('detail')\r\n\r\n        window.location.href = `./listDetail.html?img=${detail}`\r\n      })\r\n      \r\n      this.state.$arrowTop.on('tap', () => {\r\n        //滚动顶部\r\n        this.scrollTop();\r\n      })\r\n    }\r\n    fetchData() {\r\n      return this.getJSON({\r\n        url: `assets/p.json`,\r\n      })\r\n    }\r\n    createListFragment(arr){\r\n      let fragment = document.createDocumentFragment()\r\n      arr.forEach((v) => {\r\n        let html = `\r\n          <div class=\"list-itemWrap\" data-detail=\"${v.detailPic}\">\r\n            <div class=\"list-item\">\r\n              <div class=\"list-imgWrap\">\r\n                <img src=\"${v.mainPic}\" alt=\"top\"/>\r\n              </div>\r\n              <div class=\"list-name\">${v.name}</div>\r\n              <div class=\"list-money\">零售价：${v.price}</div>\r\n              <div class=\"list-btn\">查看更多</div>\r\n            </div>\r\n          </div>\r\n        `\r\n        fragment.appendChild($(html)[0])\r\n      })\r\n\r\n      return fragment\r\n    }\r\n    render(arr = []){\r\n      let fragment = this.createListFragment(arr)\r\n      this.state.$list.append(fragment)\r\n    }\r\n  }\r\n\r\n  new list()\r\n});\r\n"],"file":"list.js"}